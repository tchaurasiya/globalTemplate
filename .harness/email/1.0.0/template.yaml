template:
  inputs:
    email_ids:
      type: string
      label: Email IDs
      required: true
      ui:
        tooltip: Enter the primary recipient email addresses.
    cc_email_ids:
      type: string
      label: CC Email IDs
      ui:
        tooltip: Enter the CC recipient email addresses.
    subject:
      type: string
      label: Subject
      required: true
      ui:
        tooltip: Enter the email subject line.
    body:
      type: string
      label: Body
      required: true
      ui:
        component: textarea
        tooltip: Enter the email message content.
    to_user_groups:
      type: string
      label: To User Groups
      ui:
        tooltip: Specify the primary recipient user groups.
    cc_user_groups:
      type: string
      label: CC User Groups
      ui:
        tooltip: Specify the CC user groups.
    smtp_config:
      type: string
      label: SMTP Configuration
      ui:
        tooltip: Specify the SMTP configuration.
    attachments:
      type: list
      label: Attachments
      ui:
        tooltip: Specify attachments to include in the email.
    log_level:
      type: string
      label: Log Level
      default: info
      options:
        - debug
        - info
        - warn
        - error
      ui:
        component: select
        tooltip: Set the log level for email step execution
  layout:
    - email_ids
    - subject
    - body
    - title: Optional Configuration
      items:
        - to_user_groups
        - cc_email_ids
        - cc_user_groups
        - smtp_config
        - attachments
        - log_level

  id: email
  name: Email
  description: Send email notifications to recipients and user groups.
  version: 1
  author: harness
  module:
    - cd
  alias: email
  step:
    group:
      steps:
        - name: Send Email
          id: email
          run:
            container:
              image: harnessdev/email:0.0.1
              connector: account.harnessImage
            env:
              PLUGIN_EMAIL_IDS: ${{inputs.email_ids}}
              PLUGIN_CC_EMAIL_IDS: ${{inputs.cc_email_ids}}
              PLUGIN_SUBJECT: ${{inputs.subject}}
              PLUGIN_BODY: ${{inputs.body}}
              PLUGIN_TO_USER_GROUPS: ${{inputs.to_user_groups}}
              PLUGIN_CC_USER_GROUPS: ${{inputs.cc_user_groups}}
              PLUGIN_SMTP_CONFIG: ${{inputs.smtp_config}}
              PLUGIN_ATTACHMENTS: ${{inputs.attachments}}
              PLUGIN_LOG_LEVEL: ${{inputs.log_level}}