template:
  inputs:
    # ServiceNow Connector
    connector:
      type: connector
      label: ServiceNow connector
      required: true
      oneof:
        - ServiceNow
      ui:
        tooltip: Select the ServiceNow connector for authentication
        allowedValueTypes:
          - fixed
          - runtime
          - expression
    staging_table:
      type: string
      label: Staging table
      required: true
      ui:
        tooltip: Enter the name of the staging table for the import set
        placeholder: Enter staging table name, e.g. imp_user
    json_body:
      type: string
      label: JSON body
      required: true
      ui:
        component: textarea
        tooltip: Provide the JSON body containing the data to import
        placeholder: '{"staging_table_column_name":"column_value", ...}'
    log_level:
      type: string
      label: Log level
      default: error
      options:
        - info
        - warn
        - error
        - debug
        - trace
      ui:
        component: select
        tooltip: Set the log level for the plugin.

  layout:
    - connector
    - staging_table
    - json_body
    - log_level
  id: servicenow_importset
  name: ServiceNow Import Set
  description: Import a set of records into ServiceNow
  version: 1
  author: harness
  module:
    - cd
  alias: deploy
  step:
    group:
      steps:
        - name: Create
          id: create
          run:
            container:
              image: harnessdev/servicenow-importset:0.0.1
              connector: account.harnessImage
            env:
              # ServiceNow Connector inputs
              PLUGIN_HARNESS_CONNECTOR: ${{inputs.connector.id}}
              # ServiceNow Import Set inputs
              PLUGIN_STAGING_TABLE: ${{inputs.staging_table}}
              PLUGIN_JSON_BODY: ${{inputs.json_body}}
              PLUGIN_LOG_LEVEL: ${{inputs.log_level}}
