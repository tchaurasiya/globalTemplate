template:
  inputs:
    connector:
      type: connector
      label: Jira Connector
      required: true
      oneof:
        - Jira
      ui:
        tooltip: The Harness Jira Connector for authentication
        allowedValueTypes:
          - fixed
          - runtime
          - expression
    issue:
      type: string
      label: Issue Key
      required: true
      ui:
        component: string
        tooltip: The key of the issue to update (e.g., PROJ-123)
        placeholder: PROJ-123
    fields:
      type: list
      label: Fields to Update
      required: true
      ui:
        component: key-value-pairs
        tooltip: Specify the fields to update on the issue
    status:
      type: string
      label: Transition Status
      ui:
        component: string
        tooltip: The status to transition the issue to
        placeholder: In Progress
    transition:
      type: string
      label: Transition Name
      ui:
        component: string
        tooltip: The name of the transition to apply
        placeholder: Start Progress
    log_level:
      type: string
      label: Log Level
      default: info
      options:
        - info
        - warn
        - error
        - debug
        - trace
      ui:
        component: select
  layout:
    - connector
    - issue
    - fields
    - title: Optional Configuration
      items:
        - title: Transition Options
          items:
            - status
            - transition
        - log_level
  id: JiraUpdateStep
  name: Jira Update Issue Step
  description: Update an existing issue in Jira
  version: 1
  author: harness
  module:
    - cd
    - ci
  alias: update
  step:
    group:
      steps:
        - name: Jira Update Issue
          id: jiraUpdate
          run:
            container:
              image: harnessdev/jira-update:0.0.1
              connector: account.harnessImage
            env:
              PLUGIN_HARNESS_CONNECTOR: ${{inputs.connector.id}}
              PLUGIN_ISSUE_KEY: ${{inputs.issue}}
              PLUGIN_FIELDS: ${{inputs.fields}}
              PLUGIN_TRANSITION_STATUS: ${{inputs.status}}
              PLUGIN_TRANSITION: ${{inputs.transition}}
              PLUGIN_LOG_LEVEL: ${{inputs.log_level}}
